##  Problem statement
System A has produced the file Input.txt, which is a Fixed Width text file that contains the Future Transactions done by client 1234

    #   Business Requirements:
        The Business user would like to see the Total Transaction Amount of each unique product they have done for the day
        The Business user would like a program that can read in the Input file and generate a daily summary report
        The Daily summary report should be in CSV format (called Output.csv) with the following specifications

        The CSV has the following Headers
        - Client_Information
        - Product_Information
        - Total_Transaction_Amount

        Client_Information should be a combination of the CLIENT TYPE, CLIENT NUMBER, ACCOUNT NUMBER, SUBACCOUNT NUMBER fields from Input file
        Product_Information should be a combination of the EXCHANGE CODE, PRODUCT GROUP CODE, SYMBOL, EXPIRATION DATE
        Total_Transaction_Amount should be a Net Total of the (QUANTITY LONG - QUANTITY SHORT) values for each client per product

# Implementation Approach –

Given Problem statement is a true use case for Spring Batch i.e. Reader will read input file, Transformation will be done from read file to domain objects, and Writer will write to DB/CSV.
As a solution "product-transaction-batch" applicaiton is developed. 

# product-transaction-batch

Product transaction batch application is build on top of spring batch framework. This application takes product transaction file generated by System A and produces Product Summary report in a CSV file.

 
# Implementation Details –

* Taking Implementation approach mentioned above, the given assignment is done using Spring Batch framework.
* Application is a Boot application using spring batch libraries.
* Implemented using Java 13.
* SLF4J is the logging framework.
* Third Party Library for CSV writer
* In-memory H2 database
* Used Lombok utility library.
* Application is one-off trigger job. It can be extended to run on scheduler on daily basis.
* Application is configured to be fault tolerant i.e. if there are any issue in reading a particular record from file then job will skip that dirty record and proceed with reading other line items.
* Application processes data in 100 record chunks. It can be changed based on volume of data.

## Software

* Java 13
* H2 Database
* Git
* Maven 3.6+
* IDE 

    IDE to be used is developers choice, but Intellij is highly recommended.

## Plugins

* lombok

## Libraries used

* Spring Boot 2.2.6.RELEASE
* Spring Batch
* Lombok
* commons-csv

## General Project Guidelines
* Reads Input.txt file from system directory. Application is pre-configured to read this file from "C:/Users/assignment/Input.txt" location.
However, input directory location is configurable via "input.file" property inside application.properties.

* Application Writes Output.csv file to system directory. Application is pre-configured to write this file to "C:/Users/assignment/Output.csv" location.
However, output directory location is configurable via "output.file" property inside application.properties.

* Application generates product-transaction-batch.log file. Application is pre-configured to generate this file at "C:/Users/assignment/product-transaction-batch.log" location.
However, log file directory location is configurable via "logging.file.name" property inside application.properties.

## Prerequisites

* Place Input.txt file at location "C:/Users/assignment/Input.txt".
    
    Sample file can be copied from - https://github.com/chopramanu227/product-transaction-batch/blob/master/src/main/resources/Input.txt

* Make sure read/write access is granted to "C:/Users/assignment" directory as "Output.csv" file will be generated by the application at this location.

## Building and deploying the application

### Building the application
The project uses Maven as a build tool. It already contains
pom.xml file which includes all the dependencies required for the project.

### Running the application
* Build project after checkout using "mvn clean install"
* Using Intellij, run Application.java class as spring boot application.
* Application is a one-off batch job. Once application is started, it will trigger batch execution and will terminate the application once job is executed.
* Post execution, Output.csv file will be generated at the configured location.
* Post execution, product-transaction-batch.log file be generated at the configured location.

## Sample Out files
   Sample output files  can be found under - https://github.com/chopramanu227/product-transaction-batch/tree/master/src/main/resources/generated-samples
   * Output.csv
   * product-transaction-batch.log
   
## Notes
   With the interest of time, following implementation can be extended in next release -

   * Database design
   * Job can be configured as scheduler job which can run on daily basis to generate the report.
   * Validation on input records can be extended to handle other failure scenarios.
   * Input and Output file location can be parametrised outside the application.
   * Profiles can be added to handle different environment behaviours.
    
